@{
    ViewBag.Title = "Saç Modeli Önerisi";
}

<h2>Saç Modeli Önerisi</h2>

<p>Bir fotoğraf yükleyerek sizin için en uygun saç modelini keşfedin.</p>

<form id="photoUploadForm" enctype="multipart/form-data">
    <div>
        <label for="photo">Fotoğraf Yükle:</label>
        <input type="file" id="photo" accept="image/*" required />
    </div>
    <button type="button" id="submitButton">Önerileri Al</button>
</form>

<div id="recommendations" style="margin-top: 20px; display: none;">
    <h3>Öneriler:</h3>
    <ul id="recommendationList"></ul>
</div>

<script>
    document.getElementById('submitButton').addEventListener('click', async () => {
        const fileInput = document.getElementById('photo');
        const file = fileInput.files[0];

        if (!file) {
            alert('Lütfen bir fotoğraf seçin.');
            return;
        }

        const reader = new FileReader();
        reader.onload = async () => {
            const base64Photo = reader.result.split(',')[1]; // Fotoğrafı Base64 olarak al
            const response = await fetch('/api/Recommendation/GetHairStyleRecommendation', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ PhotoBase64: base64Photo })
            });

            if (response.ok) {
                const data = await response.json();
                const recommendationList = document.getElementById('recommendationList');
                recommendationList.innerHTML = ''; // Önceki önerileri temizle
                data.Recommendations.forEach(rec => {
                    const listItem = document.createElement('li');
                    listItem.textContent = rec;
                    recommendationList.appendChild(listItem);
                });
                document.getElementById('recommendations').style.display = 'block';
            } else {
                alert('Öneriler alınırken bir hata oluştu.');
            }
        };

        reader.readAsDataURL(file); // Fotoğrafı Base64 formatına çevir
    });
</script>
